(window.webpackJsonpmoviesclub=window.webpackJsonpmoviesclub||[]).push([[0],{23:function(e,t,r){e.exports=r(51)},34:function(e,t,r){},46:function(e,t,r){},47:function(e,t,r){},48:function(e,t,r){},49:function(e,t,r){},50:function(e,t,r){},51:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(11),s=r.n(i),o=r(9),c=r(10),l=r(2),u=r(3),p=r(5),g=r(4),_=r(6),E=r(1),f=(r(34),r(19)),m=r.n(f),d=Object.assign({},{FALLBACK_ERROR_MESSAGE:"Something went wrong. Please try again later!",API_BASE_URL:"https://afficiona-movies.herokuapp.com"},{development:{},production:{}}[Object({NODE_ENV:"production",PUBLIC_URL:"/moviesclub"}).REACT_APP_ENV]).API_BASE_URL;var v={getMoviesList:function(e){return function(t){return t({type:"FETCH_MOVIES_LIST_INIT"}),function(e){var t=m.a.stringify(e);return fetch("".concat(d,"/list?").concat(t)).then(function(e){return e.json()})}(e).then(function(e){return t(function(e){return{type:"FETCH_MOVIES_LIST_SUCCESS",data:e}}(e))},function(e){return t(function(e,t){return{type:"FETCH_MOVIES_LIST_ERROR",error:e}}(e))})}},getGenresList:function(){return function(e){return e({type:"FETCH_GENRES_LIST_INIT"}),fetch("".concat(d,"/genres")).then(function(e){return e.json()}).then(function(t){return e(function(e){return{type:"FETCH_GENRES_LIST_SUCCESS",data:e}}(t))},function(t){return e(function(e,t){return{type:"FETCH_GENRES_LIST_ERROR",error:e}}(t))})}},getLanguagesList:function(){return function(e){return e({type:"FETCH_LANGUAGES_LIST_INIT"}),fetch("".concat(d,"/languages")).then(function(e){return e.json()}).then(function(t){return e(function(e){return{type:"FETCH_LANGUAGES_LIST_SUCCESS",data:e}}(t))},function(t){return e(function(e,t){return{type:"FETCH_LANGUAGES_LIST_ERROR",error:e}}(t))})}},setFilter:function(e,t){return function(r){r(function(e,t){return{type:"SET_FILTER",filter:e,value:t}}(e,t))}}};r(12),r(46);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(r,!0).forEach(function(t){Object(c.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var b=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(p.a)(this,Object(g.a)(t).call(this,e))).onFilterSet=function(e,t){var n=e.target.value;r.props.actions.setFilter(t,n);var a={};r.props.LangaugeFilter&&(a.EventLanguage=r.props.LangaugeFilter),r.props.GenreFilter&&(a.EventGenre=r.props.GenreFilter),console.log(r.props.LangaugeFilter,r.props.GenreFilter),r.props.actions.getMoviesList(h({},a,Object(c.a)({},t,n)))},r}return Object(_.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"app__header"},this.props.LanguagesList&&a.a.createElement("div",{className:"app__header__toolbar"},a.a.createElement("select",{name:"languageFilter",onChange:function(t){return e.onFilterSet(t,"EventLanguage")}},this.props.LanguagesList.map(function(e){return a.a.createElement("option",{value:e},e)}))),this.props.GenresList&&a.a.createElement("div",{className:"app__header__toolbar"},a.a.createElement("select",{name:"genreFilter",onChange:function(t){return e.onFilterSet(t,"EventGenre")}},this.props.GenresList.map(function(e){return a.a.createElement("option",{value:e},e)}))))}}]),t}(a.a.PureComponent);var S=Object(o.b)(function(e){var t=e.Movies;return{IsLanguagesLoading:t.getIn(["filters","languages","isFetching"]),LanguagesError:t.getIn(["filters","languages","error"]),LanguagesList:t.getIn(["filters","languages","data"]),IsGenresLoading:t.getIn(["filters","genres","isFetching"]),GenresError:t.getIn(["filters","genres","error"]),GenresList:t.getIn(["filters","genres","data"]),LangaugeFilter:t.getIn(["filters","selected","EventLanguage"]),GenreFilter:t.getIn(["filters","selected","EventGenre"])}},function(e){var t=h({},v);return{actions:Object(E.b)(t,e)}})(b),I=(r(47),function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"app__loader"},"Fetching movies list...")}}]),t}(a.a.PureComponent)),L=(r(48),r(49),function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"message-box"},this.props.text)}}]),t}(a.a.PureComponent)),j=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(p.a)(this,Object(g.a)(t).call(this,e))).state={selectedTrailer:null,trailerBoxEle:null},r.setRowTrailerActive=function(e){var t=e.currentTarget.getElementsByClassName("app__list__trailer-box")[0];r.state.trailerBoxEle&&r.state.trailerBoxEle!==t&&(r.state.trailerBoxEle.innerHTML=""),r.setState({trailerBoxEle:t}),setTimeout(function(){t.innerHTML='<iframe id="ytplayer" height="360" type="text/html" src="'.concat(r.state.selectedTrailer,'?autoplay=1" frameborder="0" />;')},0)},r.onSelect=function(e,t){r.state.selectedItemEle&&r.state.selectedItemEle.classList.remove("app__list__item--active"),e.currentTarget.classList.add("app__list__item--active"),r.setState({selectedItemEle:e.currentTarget,selectedTrailer:t})},r}return Object(_.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.listRefEle.offsetWidth,r=Math.floor(t/240),n=this.props.data.reduce(function(t,n,i){var s=parseInt(i/r);return t[s]=t[s]||[],t[s].push(a.a.createElement("div",{className:"app__list__item",key:i,onClick:function(t){return e.onSelect(t,n.TrailerURL)}},a.a.createElement("div",{className:"app__list__item__media"},a.a.createElement("img",{src:"https://in.bmscdn.com/events/moviecard/".concat(n.EventCode,".jpg"),alt:n.EventName})),a.a.createElement("div",{className:"app__list__item__title"},n.EventName))),t},{});this.setState({grouped:n})}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"app__list",ref:function(t){return e.listRefEle=t}},a.a.createElement("div",{className:"app__list__filters"},"Applied Filters: ",this.props.filters),a.a.createElement("div",{className:"app__list__wrapper"},this.state.grouped&&Object.keys(this.state.grouped).map(function(t){return a.a.createElement("div",{className:"app__list__row__wrapper",key:t,onClick:e.setRowTrailerActive},a.a.createElement("div",{className:"app__list__trailer-box"}),a.a.createElement("div",{className:"app__list__row"},e.state.grouped[t]))})))}}]),t}(a.a.Component);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var y=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.actions.getMoviesList(),this.props.actions.getLanguagesList(),this.props.actions.getGenresList()}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"app"},a.a.createElement(S,null),a.a.createElement("div",{className:"app__content"},e.props.IsLoading?a.a.createElement(I,null):e.props.IsError?a.a.createElement(L,{text:"Something went wrong!"}):e.props.MoviesList.length?a.a.createElement(j,{data:e.props.MoviesList,filters:e.props.AppliedFilters}):a.a.createElement(L,{text:"No movies list found. Search again!"})))}}]),t}(a.a.Component);var F=Object(o.b)(function(e){var t=e.Movies,r=[t.getIn(["filters","selected","language"]),t.getIn(["filters","selected","genre"])];return{IsLoading:t.getIn(["list","isFetching"]),IsError:t.getIn(["list","error"]),MoviesList:t.getIn(["list","data"]),AppliedFilters:r}},function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(r,!0).forEach(function(t){Object(c.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},v);return{actions:Object(E.b)(t,e)}})(y),C=(r(50),r(20)),N=r(21),R=r(22),w=Object(R.a)({list:{isFetching:!0,error:null,data:null},filters:{languages:{isFetching:!0,error:null,data:null},genres:{isFetching:!0,error:null,data:null},selected:{EventLanguage:null,EventGenre:null}}}),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"FETCH_MOVIES_LIST_INIT":return e.mergeIn(["list"],{error:null,data:null,isFetching:!0});case"FETCH_MOVIES_LIST_SUCCESS":return e.mergeIn(["list"],{error:null,data:t.data,isFetching:!1});case"FETCH_MOVIES_LIST_ERROR":return e.mergeIn(["list"],{error:t.error.message,data:null,isFetching:!1});case"FETCH_LANGUAGES_LIST_INIT":return e.mergeIn(["filters","languages"],{error:null,data:null,isFetching:!0});case"FETCH_LANGUAGES_LIST_SUCCESS":return e.mergeIn(["filters","languages"],{error:null,data:t.data,isFetching:!1});case"FETCH_LANGUAGES_LIST_ERROR":return e.mergeIn(["filters","languages"],{error:t.error.message,data:null,isFetching:!1});case"FETCH_GENRES_LIST_INIT":return e.mergeIn(["filters","genres"],{error:null,data:null,isFetching:!0});case"FETCH_GENRES_LIST_SUCCESS":return e.mergeIn(["filters","genres"],{error:null,data:t.data,isFetching:!1});case"FETCH_GENRES_LIST_ERROR":return e.mergeIn(["filters","genres"],{error:t.error.message,data:null,isFetching:!1});case"SET_FILTER":return e.setIn(["filters","selected",t.filter],t.value);default:return e}};var P=Object(C.createLogger)({collapsed:!0});var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(arguments.length>1&&arguments[1],[N.a,P]),r=[E.a.apply(void 0,t)],n="production"!==Object({NODE_ENV:"production",PUBLIC_URL:"/moviesclub"}).REACT_APP_ENV&&"object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):E.d,a=Object(E.e)(function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],Object(E.c)({Movies:G})}(),e,n.apply(void 0,r));return a.injectedReducers={},a}({}),M=document.getElementById("root");s.a.render(a.a.createElement(o.a,{store:A},a.a.createElement(F,null)),M)}},[[23,1,2]]]);
//# sourceMappingURL=main.beca7924.chunk.js.map